<html>

<head>
  <script src="./data/deploys.js"></script>
  <script src="./data/contributers.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
  <!-- Plotly chart will be drawn inside this DIV -->
  <div id="graphDiv"></div>
  <script>
    var weeks = Object.keys(deploys);

    const deploysPerContributer = Object.keys(contributers).reduce((result, date, index, arr) => {

      result[date] = deploys[date] / contributers[date];
      return result;
    }, {});

    console.log(deploysPerContributer);
    const lines = [
      {
        mode: 'lines',
        name: 'deploys',
        line: { color: "#b55400" },
        y: Object.values(deploys).reverse(),
        x: Object.keys(deploys).reverse()
      },
      {
        mode: 'lines',
        name: 'deploys per contributer',
        line: { color: '#333' },
        y: Object.values(deploysPerContributer),
        x: Object.keys(deploysPerContributer)
      },
      {
        mode: 'lines',
        name: 'contributers',
        line: { color: '#abc' },
        y: Object.values(contributers),
        x: Object.keys(contributers)
      }
    ];

    const layout = {
      title: 'Deploys per period',
      uirevision: 'true',
      xaxis: { autorange: true },
      yaxis: { autorange: true }
    };

    Plotly.react('graphDiv', lines, layout);
  </script>
</body>

</html>
